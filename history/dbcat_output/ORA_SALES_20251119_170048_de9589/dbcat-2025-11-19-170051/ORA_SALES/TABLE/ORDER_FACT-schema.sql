
CREATE TABLE "ORA_SALES"."ORDER_FACT" (
	"ORDER_ID" NUMBER(12,0) NOT NULL,
	"ORDER_CODE" VARCHAR2(40 BYTE),
	"CUSTOMER_ID" NUMBER(10,0) NOT NULL,
	"SHIP_METHOD_ID" NUMBER(4,0) NOT NULL,
	"ORDER_TOTAL" NUMBER(14,2),
	"DISCOUNT_RATE" NUMBER(5,2),
	"STATUS" VARCHAR2(1 BYTE) DEFAULT 'N' NOT NULL,
	"ORDER_NOTE" VARCHAR2(400 BYTE),
	"CREATED_AT" DATE DEFAULT SYSDATE,
	"UPDATED_AT" DATE,
	CONSTRAINT "PK_ORDER_FACT" PRIMARY KEY ("ORDER_ID")
);

CREATE INDEX "ORA_SALES"."IDX_ORDER_FACT_CUST_DT" ON "ORA_SALES"."ORDER_FACT" ("CUSTOMER_ID" ASC, "CREATED_AT" ASC);

CREATE UNIQUE INDEX "ORA_SALES"."UK_ORDER_FACT_CODE" ON "ORA_SALES"."ORDER_FACT" ("ORDER_CODE" ASC);

ALTER TABLE "ORA_SALES"."ORDER_FACT" ADD CONSTRAINT "CK_ORDER_FACT_STATUS" CHECK (STATUS IN ('N','P','C')) ENABLE VALIDATE;
ALTER TABLE "ORA_SALES"."ORDER_FACT" ADD CONSTRAINT "FK_ORDER_FACT_SHIP" FOREIGN KEY ("SHIP_METHOD_ID") REFERENCES "ORA_REF"."SHIP_METHOD" ("SHIP_METHOD_ID") ENABLE VALIDATE;
ALTER TABLE "ORA_SALES"."ORDER_FACT" ADD CONSTRAINT "FK_ORDER_FACT_CUSTOMER" FOREIGN KEY ("CUSTOMER_ID") REFERENCES "ORA_SALES"."CUSTOMER_DIM" ("CUSTOMER_ID") ENABLE VALIDATE;

