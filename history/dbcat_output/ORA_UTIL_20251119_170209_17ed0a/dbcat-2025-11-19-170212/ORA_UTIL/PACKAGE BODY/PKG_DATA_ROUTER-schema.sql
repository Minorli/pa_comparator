DELIMITER $$

CREATE OR REPLACE PACKAGE BODY          PKG_DATA_ROUTER AS
    PROCEDURE REFRESH_REGION_CACHE IS
    BEGIN
        NULL;
    END;

    FUNCTION COUNT_ORDERS_BY_REGION(p_region_code VARCHAR2) RETURN NUMBER IS
        v_cnt NUMBER;
    BEGIN
        SELECT COUNT(*)
          INTO v_cnt
          FROM ORA_UTIL.SYN_ORDER o
          JOIN ORA_UTIL.SYN_CUSTOMER c ON c.CUSTOMER_ID = o.CUSTOMER_ID
          JOIN ORA_UTIL.SYN_REGION r ON r.REGION_ID = c.REGION_ID
         WHERE r.REGION_CODE = p_region_code;
        RETURN v_cnt;
    END;
END PKG_DATA_ROUTER;
$$

